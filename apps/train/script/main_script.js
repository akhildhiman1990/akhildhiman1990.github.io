function getSchedulePNR(){var e=$("#pnrTrainNoSchedule").text();$("#trainNumber").val(e);$("#fetchSchedule").trigger("click");location.href="#scheduleContent"}function getScheduleSeatAvail(){var e=$("#seatAvailTrainNoSchedule").text();$("#trainNumber").val(e);$("#fetchSchedule").trigger("click");location.href="#scheduleContent"}$(document).ready(function(){$(".clearFields").click(function(){location.reload(true)});var e="<div id='HomeContentText'><img src='images/IRCTC-logo.png' width='10%' height='10%'/><p>Welcome to Indian Rail Catering and Tourism Corporation Limited.<br/>Please Find Your Query Below...</p></div>";$("#homeContent").prepend(e);var t="<h1>Passenger Current Status</h1><p>Enter the PNR for your booking below to get the current status. You will find it on the top left corner of the ticket.</p>";$("#pnrContent").prepend(t);$("#fetchPNR").click(function(){var e=$("#pnrNumber").val();var t="http://pnrbuddy.com/api/check_pnr/pnr/"+e+"/format/json";$.ajax({url:t,method:"GET",crossDomain:true,dataType:"json",success:function(t){$("#pnrNumberResult").empty();if(t.train_num==null||e==""){$("#pnrNumberResult").html("Please Enter a Valid PNR!!!")}else{var n={pnrNumber:t.pnr,trainNumber:t.train_num,trainName:t.train_name,dataOfJourney:t.doj,fromStation:t.from_station.code,toStation:t.to_station.code,reserveUpto:t.reservation_upto.code,boardingPoint:t.boarding_point.code,classTravel:t.class,passengerDetails:t.passengers,chartingStatus:t.chart_prepared};var r="<div id='pnrDetails'><b>PNR Number : </b>"+n.pnrNumber+" (E-TICKET)</div><div id='trainDetails' class='appTableDiv'><div class='TableHeaders'><b>Journey Details</b></div><table border='1'><tr><th>Train Number</th><th>Train Name</th><th>Boarding Date</th><th>From Station</th><th>To Station</th><th>Boarding Point</th><th>Reserved Upto</th><th>Class</th></tr><tr><td><a href='#' id='pnrTrainNoSchedule' onclick='getSchedulePNR()'>"+n.trainNumber+"</a></td><td>"+n.trainName+"</td><td>"+n.dataOfJourney+"</td><td>"+n.fromStation+"</td><td>"+n.toStation+"</td><td>"+n.boardingPoint+"</td><td>"+n.reserveUpto+"</td><td>"+n.classTravel+"</td></tr></table></div><div id='passengerDetails' class='appTableDiv'><div class='TableHeaders'><b>Passenger Details</b></div></div>";$("#pnrNumberResult").append(r);var i="<tr><th>Sr No.</th><th>Booking Status(Coach No,Berth No.,Quota)</th><th>*Current Status(Coach No,Berth No.)</th></tr>";$("#passengerDetails").append(i);$(n.passengerDetails).each(function(e){var n={srno:t.passengers[e].sr,bookingStatus:t.passengers[e].booking_status,currentStatus:t.passengers[e].current_status};var r="<tr><td>Passenger "+n.srno+"</td><td>"+n.bookingStatus+"</td><td>"+n.currentStatus+"</td></tr>";$("#passengerDetails").append(r)});if(n.chartingStatus=="N"){var s="CHART NOT PREPARED"}else{var s="CHART PREPARED"}var o="<tr><td><b>Charting Status</b></td><td colspan='2'>"+s+"</td></tr>";$("#passengerDetails").append(o);$("#passengerDetails tr").wrapAll("<table border='1'></table>")}},error:function(e){$("#pnrNumberResult").empty();$("#pnrNumberResult").html("Internal Server Error!!! Please try after Some Time")}})});var n="<h1>Train Schedule</h1><p>Please enter Train Number.</p><p> e.g. To get the train schedule for Himachal Express i.e. Train No. 14553 - enter 14553</p>";$("#TrainScheduleContent").prepend(n);$("#fetchSchedule").click(function(){var e=$("#trainNumber").val();var t="http://pnrbuddy.com/api/route/train/"+e+"/format/json";$.ajax({url:t,method:"GET",crossDomain:true,dataType:"json",success:function(t){$("#TrainScheduleResult").empty();if(t.msg!=undefined){if(e==""){$("#TrainScheduleResult").html("Please Enter Train No.")}else{$("#TrainScheduleResult").html(t.msg)}}else{var n={trainNumber:t.train.number,trainName:t.train.name,runningDays:t.train.days,availClasses:t.train.classes,pantryDetails:t.train.pantry,routeDetails:t.train.route};if(n.pantryDetails=="Y"){var r="Y"}else{var r="N"}var i=n.routeDetails.length;var s="<div id='trainInformation' class='AllScheduleDiv'><div class='TableHeaders'><b>Train Information</b></div><table border='1'><tr><th>Train No</th><th>Train Name</th><th>Source To Destination</th><th>Pantry</th></tr><tr><td>"+n.trainNumber+"</td><td>"+n.trainName+"</td><td>"+n.routeDetails[0].station.name.toUpperCase()+" to "+n.routeDetails[i-1].station.name.toUpperCase()+"</td><td>"+r+"</td></tr></table></div><div id='runningInfoDetail' class='AllScheduleDiv'><div class='TableHeaders'><b>Runs On</b></div></div><div id='classesDetails' class='AllScheduleDiv'><div class='TableHeaders'><b>Classes Available</b></div></div><div id='routeDetails' class='AllScheduleDiv'><div class='TableHeaders'><b>Route Information</b></div></div>";$("#TrainScheduleResult").append(s);var o="<tr class='WeekDays'></tr><tr class='runningWeekDays'></tr>";$("#runningInfoDetail").append(o);$(n.runningDays).each(function(e){var n={dayCode:t.train.days[e]["day-code"],runningStatus:t.train.days[e]["runs"]};$(".WeekDays").append("<td>"+n.dayCode+"</td>");$(".runningWeekDays").append("<td>"+n.runningStatus+"</td>")});$("#runningInfoDetail tr").wrapAll("<table border='1'></table>");var u="<tr class='ClassName'></tr><tr class='availableClass'></tr>";$("#classesDetails").append(u);$(n.availClasses).each(function(e){var n={classCode:t.train.classes[e]["class-code"],AvailableClass:t.train.classes[e]["available"]};$(".ClassName").append("<td>"+n.classCode+"</td>");$(".availableClass").append("<td>"+n.AvailableClass+"</td>")});$("#classesDetails tr").wrapAll("<table border='1'></table>");var a="<tr><th>Station No.</th><th>Station Details</th><th>Arrival Time</th><th>Departure Time</th><th>Halt Time(In Minutes)</th><th>Day</th><th>Distance</th></tr>";$("#routeDetails").append(a);$(n.routeDetails).each(function(e){var n={stationNo:t.train.route[e].no,arrivalTime:t.train.route[e].arrival_time,departureTime:t.train.route[e].departure_time,stopTime:t.train.route[e].stop_time,dayStatus:t.train.route[e].day,distanceCovered:t.train.route[e].distance,stationName:t.train.route[e].station.name,stationCode:t.train.route[e].station.code};var r="<tr><td>"+n.stationNo+"</td><td>"+n.stationName+" ( "+n.stationCode+" ) "+"</td><td>"+n.arrivalTime+"</td><td>"+n.departureTime+"</td><td>"+n.stopTime+"</td><td>"+n.dayStatus+"</td><td>"+n.distanceCovered+"</td></tr>";$("#routeDetails").append(r)});$("#routeDetails tr").wrapAll("<table border='1'></table>")}},error:function(e){$("#TrainScheduleResult").empty();$("#TrainScheduleResult").html("Internal Server Error!!! Please try after Some Time")}})});var r="<h1>Station Info</h1><p>Please enter Station Name/Code.</p><p> e.g. To get Station Info of New Delhi please enter New Delhi/NDLS</p>";$("#stationDetailsContent").prepend(r);var i="<p>Please Choose one of the following</p>";$("#fetchStationDetails").click(function(){var e=$("#stationQuery").val();if($("#StationNameCategory").is(":checked")){var t="http://pnrbuddy.com/api/station_by_name/name/"+e+"/partial/1/format/json"}else if($("#StationCodeCategory").is(":checked")){var t="http://pnrbuddy.com/api/stations_by_codes/codes/"+e+"/format/json"}else{$("#stationDetailsResult").empty();if(e.length===0){$("#stationDetailsResult").html("Please Enter Station Info")}else{$("#stationDetailsResult").html("Please Choose Category")}return false}$.ajax({url:t,method:"GET",crossDomain:true,dataType:"json",success:function(e){$("#stationDetailsResult").empty();if(e.stations.length==0){$("#stationDetailsResult").html("Please Enter Valid Station Info")}else{var t="<div id='stationDetailsDiv' class='AllStationDiv appTableDiv'><div class='TableHeaders'><b>Station Information</b></div></div>";var n="<tr><th></th><th>Station Name</th><th>Station Code</th><th>State</th></tr>";$("#stationDetailsResult").append(t);$("#stationDetailsDiv").append(n);$(e.stations).each(function(t){var n={stationName:e.stations[t].name,stationCode:e.stations[t].code,stationState:e.stations[t].state};if(n.stationState==null){var r="INFO N/A"}else{var r=n.stationState}var i="<tr><td>Station No. "+(t+1)+"</td><td>"+n.stationName.toUpperCase()+"</td><td>"+n.stationCode.toUpperCase()+"</td><td>"+r+"</td></tr>";$("#stationDetailsDiv").append(i)});$("#stationDetailsDiv tr").wrapAll("<table border='1'></table>")}},error:function(e){$("#stationDetailsResult").empty();$("#stationDetailsResult").html("Internal Server Error!!! Please try after Some Time")}})});var s="<h1>Seat Availability Status</h1><p>Please Enter Following Details</p>";$("#seatAvailabilityStatusContent").prepend(s);var o={ClassArray:["Class","1A","2A","3A","3E","CC","FC","SL","2S"],QuotaArray:["Quota","CK","LD","DF","FT","DP","HP","PH","SS","YU","GN"]};$(o.ClassArray).each(function(e,t){$("#ChooseSeatClass").append("<input type='radio' name='availableClass' data-theme='e' id='"+t+"Category' value='"+t+"' /><label for='"+t+"Category'>"+t+"</label>")});$(o.QuotaArray).each(function(e,t){$("#ChooseSeatQuota").append("<input type='radio' name='availableQuota' data-theme='e' id='"+t+"Category' value='"+t+"' /><label for='"+t+"Category'>"+t+"</label>")});$("#ClassCategory").attr("disabled","disabled");$("#QuotaCategory").attr("disabled","disabled");$("#seatAvailabilityDay").attr("maxlength","2");$("#seatAvailabilityMonth").attr("maxlength","2");$("#seatAvailabilityYear").attr("maxlength","4");$(".date-of-journey #seatAvailabilityDay").keyup(function(){if($("#seatAvailabilityDay").val().length==2){$("#seatAvailabilityMonth").focus()}});$(".date-of-journey #seatAvailabilityMonth").keyup(function(){if($("#seatAvailabilityMonth").val().length==2){$("#seatAvailabilityYear").focus()}});$("#fetchSeatAvailability").click(function(){var e={trainNo:$("#seatAvailabilityTrainNumber").val(),fromStation:$("#seatAvailabilityFromStation").val(),toStation:$("#seatAvailabilityToStation").val(),day:$("#seatAvailabilityDay").val(),month:$("#seatAvailabilityMonth").val(),year:$("#seatAvailabilityYear").val(),travelClass:$("input[name='availableClass']:checked").val(),travelQuota:$("input[name='availableQuota']:checked").val()};var t=e.day+"-"+e.month+"-"+e.year;var n="http://pnrbuddy.com/api/check_avail/tnum/"+e.trainNo+"/fscode/"+e.fromStation+"/tscode/"+e.toStation+"/date/"+t+"/class/"+e.travelClass+"/quota/"+e.travelQuota+"/format/json";$.ajax({url:n,method:"GET",crossDomain:true,dataType:"json",success:function(e){$("#seatAvailabilityStatusResult").empty();if(e.msg!=undefined){$("#seatAvailabilityStatusResult").html(e.msg)}else if(e.error!=undefined){$("#seatAvailabilityStatusResult").html(e.error)}else{var t="<div id='SeatAvailInformation' class='AllScheduleDiv'><div class='TableHeaders'><b>Journey Details</b></div></div><div id='dateWiseAvailability' class='AllScheduleDiv'><table border='1'><tr><th>Date</th><th>Status</th></tr></table></div>";$("#seatAvailabilityStatusResult").append(t);var n={trainNo:e.availability.train_number,trainName:e.availability.train_name,dateOfJourney:e.availability.date_of_journey,fromStationName:e.availability.from.name,fromStationCode:e.availability.from.code,toStationName:e.availability.to.name,toStationCode:e.availability.to.code,classCode:e.availability.class.class_code,className:e.availability.class.class_name,quotaName:e.availability.quota.quota_name,quotaCode:e.availability.quota.quota_code};var r="<table border='1'><tr><th>Train No.</th><th>Train Name</th><th>Date Of Journey</th><th>Journey Details</th><th>Class</th><th>Quota</th></tr><tr><td><a href='#' id='seatAvailTrainNoSchedule' onclick='getScheduleSeatAvail()'>"+n.trainNo+"</a></td><td>"+n.trainName+"</td><td>"+n.dateOfJourney+"</td><td>"+n.fromStationName+"( "+n.fromStationCode.toUpperCase()+" ) to "+n.toStationName+"( "+n.toStationCode.toUpperCase()+" )</td><td>"+n.className+"( "+n.classCode+" )</td><td>"+n.quotaName+"( "+n.quotaCode+" )</td></tr></table>";$("#SeatAvailInformation").append(r);$(e.availability.availability_status).each(function(t){var n="<tr><td>"+e.availability.availability_status[t].date+"</td><td>"+e.availability.availability_status[t].status+"</td></tr>";$("#dateWiseAvailability table").append(n)})}},error:function(e){$("#seatAvailabilityStatusResult").empty();$("#seatAvailabilityStatusResult").html("Internal Server Error!!! Please try after Some Time")}})});var u="<h1>Train Running Status</h1><p>Please enter Train Number.</p><p> e.g. To get the running status for Himachal Express i.e. Train No. 14553 - enter 14553</p>";$("#TrainRunningStatusContent").prepend(u);$("#TrainRunningStatusResult").html("This Section is Under Construction")})